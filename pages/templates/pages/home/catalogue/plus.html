    {% load static %}

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Montserrat:wght@400;500&display=swap" rel="stylesheet">

    <section class="recommendations-section">
        <h2 class="recommendations-title">Vous aimerez aussi</h2>
        <div class="recommendations-grid">
            
            <article class="product-item">
                <a href="#">
                    <img src="{% static 'pages/images/robes/louis-vuitton-robe-boutonnee-en-denim--FTDR40GOW610_PM1_Worn view.avif' %}" alt="Robe à bretelles et mousquetons">
                    <div class="product-info">
                        <h3>Robe à bretelles et mousquetons</h3>
                        <p class="price">250,00 €</p>
                    </div>
                </a>
            </article>

            <article class="product-item">
                <a href="#">
                    <img src="{% static 'pages/images/robes/louis-vuitton-robe-polo-en-gabardine-technique--FTDS43G72900_PM1_Worn view.avif' %}" alt="Robe polo en gabardine technique">
                    <div class="product-info">
                        <h3>Robe polo en gabardine technique</h3>
                        <p class="price">180,00 €</p>
                    </div>
                </a>
            </article>

            <article class="product-item">
                <a href="#">
                    <img src="{% static 'pages/images/robes/louis-vuitton-robe-chemise-a-monogram-graphique--FTDR63WVD002_PM2_Front view.avif' %}" alt="Robe chemise à Monogram graphique">
                    <div class="product-info">
                        <h3>Robe chemise à Monogram graphique</h3>
                        <p class="price">333,00 €</p>
                    </div>
                </a>
            </article>

            <article class="product-item">
                <a href="#">
                    <img src="{% static 'pages/images/robes/louis-vuitton-robe-a-rangees-de-boutons--FTDR33NQA000_PM1_Worn view.avif' %}" alt="Robe à rangées de boutons">
                    <div class="product-info">
                        <h3>Robe à rangées de boutons</h3>
                        <p class="price">250,00 €</p>
                    </div>
                </a>
            </article>

            <article class="product-item">
                <a href="#">
                    <img src="{% static 'pages/images/robes/louis-vuitton-robe-chemise-a-imprime-monogram-foulard--FSDR29SDK700_PM1_Worn view.avif' %}" alt="Robe chemise à imprimé Monogram Foulard">
                    <div class="product-info">
                        <h3>Robe chemise à imprimé Monogram Foulard</h3>
                        <p class="price">400,00 €</p>
                    </div>
                </a>
            </article>

            <article class="product-item">
                <a href="#">
                    <img src="{% static 'pages/images/robes/louis-vuitton-robe-chemise-a-details-monogram--FTDS05YF4000_PM2_Front view.avif' %}" alt="Robe chemise à détails Monogram">
                    <div class="product-info">
                        <h3>Robe chemise à détails Monogram</h3>
                        <p class="price">270,00 €</p>
                    </div>
                </a>
            </article>

        </div>
        <div class="progress-bar-container">
            <div class="progress-bar-thumb"></div>
        </div>
    </section>

    <style>
        .recommendations-section {
            width: 100%;
            padding: 60px 0;
            background-color: #ffffff; 
            overflow: hidden; 
        }

        .recommendations-title {
            text-align: center;
            font-family: 'Montserrat', sans-serif;
            text-transform: uppercase;
            font-size: 1.2rem; 
            letter-spacing: 3px; 
            font-weight: 500;
            color: #1c1c1c;
            margin: 0 0 40px 0;
        }

        .recommendations-grid {
            display: flex;
            overflow-x: auto; 
            gap: 20px;
            padding: 0 40px; 
            justify-content: center;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .recommendations-grid::-webkit-scrollbar {
            display: none; 
        }

        .recommendations-grid {
            cursor: grab; 
        }

        .recommendations-grid:active {
            cursor: grabbing; 
        }

        .product-item {
            flex: 0 0 280px; 
            text-align: left;
        }
        .product-item a {
            text-decoration: none;
            color: inherit; 
            display: block;
        }
        
        .product-item img {
            width: 100%;
            height: auto;
            aspect-ratio: 0.75;
            object-fit: cover;
            margin-bottom: 15px;
            pointer-events: none; 
        }

        .product-item h3 {
            font-family: 'Lato', sans-serif;
            font-size: 0.85rem;
            font-weight: 700;
            margin: 0 0 8px 0;
            color: #1c1c1c;
            line-height: 1.3;
        }
        
        .product-item .price {
            font-family: 'Lato', sans-serif;
            font-size: 0.85rem;
            color: #555;
            margin: 0;
        }
        
        .progress-bar-container {
            width: 100px; 
            height: 1px; 
            background-color: #e0e0e0; 
            margin: 30px auto 0 auto; 
            position: relative;
        }

        .progress-bar-thumb {
            width: 0; 
            height: 100%;
            background-color: #1c1c1c;
            position: absolute;
            left: 0;
            top: 0;
        }
    </style>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const slider = document.querySelector('.recommendations-grid');
            const progressBar = document.querySelector('.progress-bar-thumb');
            let isDown = false;
            let startX;
            let scrollLeft;
            let velocity = 0;
            let animationFrameId;

            const startDragging = (e) => {
                isDown = true;
                slider.classList.add('active');
                startX = e.pageX - slider.offsetLeft;
                scrollLeft = slider.scrollLeft;
                cancelAnimationFrame(animationFrameId);
            };

            const stopDragging = () => {
                isDown = false;
                slider.classList.remove('active');
                beginMomentumTracking();
            };

            const onDrag = (e) => {
                if (!isDown) return;
                e.preventDefault(); 
                
                const x = e.pageX - slider.offsetLeft;
                const walk = x - startX; 
                const newScrollLeft = scrollLeft - walk;
                slider.scrollLeft = newScrollLeft;
                velocity = (scrollLeft - newScrollLeft) - (slider.scrollLeft - newScrollLeft);
            };

            slider.addEventListener('mousedown', startDragging);
            slider.addEventListener('mouseup', stopDragging);
            slider.addEventListener('mouseleave', stopDragging);
            slider.addEventListener('mousemove', onDrag);

            
            const beginMomentumTracking = () => {
                cancelAnimationFrame(animationFrameId);
                animationFrameId = requestAnimationFrame(momentumLoop);
            };
            
            const momentumLoop = () => {
                slider.scrollLeft += velocity;
                velocity *= 0.95; 
                if (Math.abs(velocity) > 0.5) {
                    animationFrameId = requestAnimationFrame(momentumLoop);
                }
            };

            function updateProgressBar() {
                const maxScrollLeft = slider.scrollWidth - slider.clientWidth;
                
                if (maxScrollLeft > 0) {
                    progressBar.parentElement.style.display = 'block';
                    const progress = slider.scrollLeft / maxScrollLeft;
                    const thumbWidth = slider.clientWidth / slider.scrollWidth;
                    
                    progressBar.style.width = `${thumbWidth * 100}%`;
                    progressBar.style.left = `${progress * (1 - thumbWidth) * 100}%`;
                } else {
                    progressBar.parentElement.style.display = 'none';
                }
            }

            slider.addEventListener('scroll', updateProgressBar);
            updateProgressBar();
            window.addEventListener('resize', updateProgressBar);
        });
    </script>