{% load static %}
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Charlène Morabito - Accueil</title>
    <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'pages/fonts/stylesheet.css' %}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <link rel="stylesheet" href="{% static 'pages/style_header.css' %}">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400&display=swap" rel="stylesheet">

    
    <style>
        body, html {
            margin: 0;
            padding: 0;
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
            background-color: #000;
            color: #fff;
        }
        html {
            scrollbar-width: none;
        }

        body::-webkit-scrollbar {
            display: none;
        }

        .preloader {
            position: fixed; top: 0; left: 0; width: 100%; height: 100vh;
            background-color: #000; display: flex; justify-content: center;
            align-items: center; z-index: 9999;
        }

        .preloader-logo {
            color: #fff;
            font-family: 'Tenor Sans', sans-serif; 
            font-size: 1.8rem;
            font-weight: 400;
            text-transform: uppercase;
            letter-spacing: 2px;
            padding-bottom: 10px;
            background-image: linear-gradient(to right, #009246 33.3%, #FFFFFF 33.3%, #FFFFFF 66.6%, #CE2B37 66.6%);
            background-repeat: no-repeat;
            background-size: 80% 2px;
            background-position: bottom center;
            opacity: 0;
        }

        .nav-logo,
        .nav-links-left a,
        .nav-links-right a,
        .hero-section .image-column {
            opacity: 0;
        }
    </style>
</head>
<body>

    <div class="preloader">
        <div class="preloader-logo">
            CHARLÈNE MORABITO
        </div>
    </div>

    <header class="main-header">
        <nav class="main-nav">
            <div class="nav-links-left">
                <a href="#SUR-MESURE">SUR-MESURE</a>
                <a href="#nouvelle-collection">NOUVEAUTÉS</a>
                <a href="#ready-to-wear" onclick="event.preventDefault(); window.location.href='{% url 'pret-a-porter' %}'">PRÊT-À-PORTER</a>
            </div>
            <div class="nav-logo">
                <a href="/">
                    CHARLÈNE MORABITO
                </a>
            </div>
            <div class="nav-links-right">
                <a href="#la-maison">La Maison</a>
                <a href="#footer">CONTACT</a>
                <a href="#">SE CONNECTER</a>
                <a href="#" class="cart-icon" aria-label="Panier">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path><line x1="3" y1="6" x2="21" y2="6"></line><path d="M16 10a4 4 0 0 1-8 0"></path></svg>
                    <span class="cart-counter">0</span>
                </a>
            </div>
        </nav>
    </header>


    <main class="hero-section">
        <div class="image-column">
            <img src="{% static 'pages/images/Morabito4.JPG' %}" alt="Troisième tenue">
        </div>
        <div class="image-column">
            <img src="{% static 'pages/images/morabito2.jpeg' %}" alt="Deuxième tenue">
        </div>
        <div class="image-column">
            <img src="{% static 'pages/images/morabito.jpg' %}" alt="Première tenue">
        </div>
        <div class="hero-content">
            <h2>SAVOIR-FAIRE ITALIEN, ALLURE PARISIENNE</h2>
            <a href="#" class="hero-button">DÉCOUVRIR LA COLLECTION</a>
        </div>
    </main>
    
    {% include "pages/home/section/creation.html" %}
    {% include "pages/home/section/page.html" %}
    {% include "pages/home/section/ready-to-wear.html" %}
    {% include "pages/home/section/la-maison.html" %}
    {% include "pages/home/section/lookbook.html" %}
    {% include "pages/home/section/footer.html" %}

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollToPlugin.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>


    <script>
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof gsap !== 'undefined') {

                const tl = gsap.timeline({
                    onComplete: () => {
                        document.querySelector('.preloader')?.remove();
                        gsap.set('.nav-logo', { clearProps: 'transform' });
                    }
                });

                tl.to('.preloader-logo', {
                    duration: 1.2,
                    opacity: 1,
                    ease: 'power1.inOut'
                }, '+=0.5');

                tl.to('.preloader', {
                    duration: 1,
                    opacity: 0,
                    ease: 'power2.out'
                });

                tl.to('.nav-logo', {
                    duration: 1.2,
                    opacity: 1,
                    ease: 'power3.out'
                }, '-=0.8');

                tl.from('.nav-logo', {
                    duration: 1.2,
                    scale: 2.5,
                    y: '45vh',
                    ease: 'power3.out'
                }, '<');

                tl.to(['.nav-links-left a', '.nav-links-right a'], {
                    duration: 0.4, 
                    opacity: 1
                }, '-=0.5');

                tl.to('.image-column', {
                    duration: 1,
                    opacity: 1,
                    stagger: 0.2,
                    ease: 'power2.inOut'
                }, '<');
            }
        });
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            gsap.registerPlugin(ScrollTrigger, ScrollToPlugin);
            const navLinks = document.querySelectorAll('.main-nav a[href^="#"]');
            navLinks.forEach(link => {
                const targetSelector = link.getAttribute('href');
                const targetElement = document.querySelector(targetSelector);

                if (targetElement) {
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        gsap.to(window, {
                            duration: 1.2,
                            ease: 'power2.inOut',
                            scrollTo: {
                                y: targetElement,
                                offsetY: 70 
                            }
                        });
                    });

                    ScrollTrigger.create({
                        trigger: targetElement,
                        start: 'top center',
                        end: 'bottom center',
                        toggleClass: {
                            targets: link,
                            className: 'active-link'
                        }
                    });
                }
            });
        });
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const header = document.querySelector('.main-header');
            window.addEventListener('scroll', function() {
                if (window.scrollY > 50) { 
                    header.classList.add('scrolled');
                } else {
                    header.classList.remove('scrolled');
                }
            });
        });
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const anchorLinks = document.querySelectorAll('a[href^="#"]');

            anchorLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const href = this.getAttribute('href');
                    const targetSection = document.querySelector(href); 

                    if (targetSection) {
                        gsap.to(window, {
                            duration: 1.2,
                            scrollTo: {
                                y: targetSection, 
                                offsetY: 70
                            },
                            ease: "power2.inOut"
                        });
                    }
                });
            });
        });
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 1. On vérifie si l'URL contient une ancre (ex: #nouvelle-collection)
            const hash = window.location.hash;

            // 2. Si une ancre existe, on attend un court instant que l'animation
            //    du preloader se termine, puis on défile en douceur.
            if (hash) {
                const targetElement = document.querySelector(hash);
                if (targetElement) {
                    // On utilise un petit délai pour être sûr que tout est chargé et visible
                    setTimeout(() => {
                        gsap.to(window, {
                            duration: 1.5, // Durée du défilement
                            ease: 'power2.inOut',
                            scrollTo: {
                                y: targetElement,
                                offsetY: 70 // Décalage pour le header fixe
                            }
                        });
                    }, 100); // Délai de 100ms
                }
            }
        });
    </script>
</body>
</html>