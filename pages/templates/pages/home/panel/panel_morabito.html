<div id="update_first_section" class="panel_data" style="z-index: 10000; display: none;">
    <div class="panel panel_data-content">
        <form id="update_first_section_form" method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <input type="hidden" name="action" value="update_first_section_info"/>
            <input type="hidden" name="section_id" value="{{ first_section.id }}"/>

            <div class="form-group">
                <label><strong><em>Titre :</em></strong></label>
                <input type="text" class="form-control" name="title" value="{{ first_section.title|default:"Savoir-Faire d'Exception" }}">
            </div>

            <div class="form-group">
                <label><strong><em>Description :</em></strong></label>
                <textarea class="form-control" name="description">{{ first_section.description|default:"Au cœur de nos ateliers italiens, chaque création est façonnée à la main par nos artisans, gardiens d'une tradition et d'une excellence uniques." }}</textarea>
            </div>

            <div class="form-group">
                <label><strong><em>Texte du lien :</em></strong></label>
                <input type="text" class="form-control" name="link_text" value="{{ first_section.link_text|default:"Découvrir nos pièces" }}">
            </div>

            <div class="form-group">
                <label><strong><em>URL du lien :</em></strong></label>
                <input type="url" class="form-control" name="link_url" value="{{ first_section.link_url|default:'' }}">
            </div>

            <div class="form-group">
                <label><strong><em>Image :</em></strong></label>
                <input type="file" name="image">
                <p id="image_selected_text" style="font-size: 13px; color: #555; margin-top: 5px; display: none;">
                    Fichier sélectionné : <span id="selected_filename"></span>
                </p>
            </div>

            <button type="submit" class="full-width-button">Valider</button>
            <button type="button" id="reset_first_section_button" style="background: none; border: none; color: #c0392b; font-size: 13px; text-decoration: underline; margin: 10px auto 0; display: block; cursor: pointer;">
                Réinitialiser cette section
            </button>
        </form>
    </div>
</div>

<script>
    $('#update_first_section_form').submit(function(e) {
        e.preventDefault();
        const form = $(this)[0];
        const formData = new FormData(form);

        $.ajax({
            type: 'POST',
            url: '{% url "brand_action_handler" %}',
            data: formData,
            contentType: false,
            processData: false,
            success: function(response) {
                if (response.status === 'success') {
                    location.reload();
                } else {
                    alert(response.message);
                }
            }
        });
    });

    const inputImage = document.querySelector('#update_first_section_form input[name="image"]');
    const textContainer = document.getElementById('image_selected_text');
    const filenameSpan = document.getElementById('selected_filename');

    inputImage.addEventListener('change', function() {
        const file = this.files[0];
        if (file) {
            filenameSpan.textContent = file.name;
            textContainer.style.display = 'block';
        } else {
            filenameSpan.textContent = '';
            textContainer.style.display = 'none';
        }
    });
</script>

<script>
    $('#reset_first_section_button').click(function() {
        if (!confirm("Êtes-vous sûr de vouloir réinitialiser cette section ?")) return;

        $.ajax({
            type: 'POST',
            url: '{% url "brand_action_handler" %}',
            data: {
                'action': 'reset_first_section',
                'section_id': '{{ first_section.id }}',
                'csrfmiddlewaretoken': '{{ csrf_token }}'
            },
            success: function(response) {
                if (response.status === 'success') {
                    location.reload();
                } else {
                    alert(response.message);
                }
            }
        });
    });
</script>






<div id="update_second_section" class="panel_data" style="z-index: 10000; display: none;">
    <div class="panel panel_data-content">
        <form id="update_second_section_form" method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <input type="hidden" name="action" value="update_second_section_info"/>
            <input type="hidden" name="section_id" value="{{ second_section.id }}"/>

            <div class="form-group">
                <label><strong><em>Titre :</em></strong></label>
                <input type="text" class="form-control" name="title" value="{{ second_section.title|default:"L'Expérience Sur-Mesure" }}">
            </div>

            <div class="form-group">
                <label><strong><em>Description :</em></strong></label>
                <textarea class="form-control" name="description">{{ second_section.description|default:"Pour une occasion spéciale ou le désir d'une pièce qui n'appartient qu'à vous, nous vous invitons à co-créer un vêtement d'exception, parfaitement ajusté à votre silhouette et vos envies." }}</textarea>
            </div>

            <div class="form-group">
                <label><strong><em>Texte du lien :</em></strong></label>
                <input type="text" class="form-control" name="link_text" value="{{ second_section.link_text|default:"Prendre rendez-vous" }}">
            </div>

            <div class="form-group">
                <label><strong><em>URL du lien :</em></strong></label>
                <input type="url" class="form-control" name="link_url" value="{{ second_section.link_url|default:'' }}">
            </div>

            <div class="form-group">
                <label><strong><em>Image :</em></strong></label>
                <input type="file" name="image">
                <p id="image_selected_text_2" style="font-size: 13px; color: #555; margin-top: 5px; display: none;">
                    Fichier sélectionné : <span id="selected_filename_2"></span>
                </p>
            </div>

            <button type="submit" class="full-width-button">Valider</button>
            <button type="button" id="reset_second_section_button" style="background: none; border: none; color: #c0392b; font-size: 13px; text-decoration: underline; margin: 10px auto 0; display: block; cursor: pointer;">
                Réinitialiser cette section
            </button>
        </form>
    </div>
</div>



<script>
    $('#update_second_section_form').submit(function(e) {
        e.preventDefault();
        const form = $(this)[0];
        const formData = new FormData(form);

        $.ajax({
            type: 'POST',
            url: '{% url "brand_action_handler" %}',
            data: formData,
            contentType: false,
            processData: false,
            success: function(response) {
                if (response.status === 'success') {
                    location.reload();
                } else {
                    alert(response.message);
                }
            }
        });
    });

    const inputImage2 = document.querySelector('#update_second_section_form input[name="image"]');
    const textContainer2 = document.getElementById('image_selected_text_2');
    const filenameSpan2 = document.getElementById('selected_filename_2');

    inputImage2.addEventListener('change', function() {
        const file = this.files[0];
        if (file) {
            filenameSpan2.textContent = file.name;
            textContainer2.style.display = 'block';
        } else {
            filenameSpan2.textContent = '';
            textContainer2.style.display = 'none';
        }
    });

    $('#reset_second_section_button').click(function() {
        if (!confirm("Êtes-vous sûr de vouloir réinitialiser cette section ?")) return;

        $.ajax({
            type: 'POST',
            url: '{% url "brand_action_handler" %}',
            data: {
                'action': 'reset_second_section',
                'section_id': '{{ second_section.id }}',
                'csrfmiddlewaretoken': '{{ csrf_token }}'
            },
            success: function(response) {
                if (response.status === 'success') {
                    location.reload();
                } else {
                    alert(response.message);
                }
            }
        });
    });
</script>








<div id="update_brand_name" class="panel_data" style="z-index: 10000; display: none;">
    <div class="panel panel_data-content">
        <form id="update_brand_form" method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <input type="hidden" name="action" value="update_brand_info"/>
            <input type="hidden" name="brand_id" value="{{ brand.id }}"/>

            <div class="form-group">
                <label for="name"><strong><em>Nom de la marque :</em></strong></label>
                <input type="text" class="form-control" name="name" value="{{ brand.name|default:'CHARLÈNE MORABITO' }}" required>
            </div>

            <div class="form-group">
                <label for="slogan"><strong><em>Slogan :</em></strong></label>
                <input type="text" class="form-control" name="slogan" value="{{ brand.slogan|default:'SAVOIR-FAIRE ITALIEN, ALLURE PARISIENNE' }}">
            </div>

            <div class="form-group">
                <label for="call_to_action"><strong><em>Call to Action :</em></strong></label>
                <input type="text" class="form-control" name="call_to_action" value="{{ brand.call_to_action|default:'DÉCOUVRIR LA COLLECTION' }}">
            </div>

            <button type="submit" class="full-width-button">Valider</button>
        </form>
    </div>
</div>


<script>
$('#update_brand_form').submit(function(e) {
    e.preventDefault();
    const form = $(this)[0];
    const formData = new FormData(form);

    $.ajax({
        type: 'POST',
        url: '{% url "brand_action_handler" %}',  // ou ton endpoint approprié
        data: formData,
        contentType: false,
        processData: false,
        success: function(response) {
            if (response.status === 'error') {
                alert(response.message);
            } else {
                location.reload();  // ou maj DOM si tu veux éviter un reload
            }
        }
    });
});
</script>




<div id="update_ready_section" class="panel_data" style="z-index: 10000; display: none;">
    <div class="panel panel_data-content">
        <form id="update_ready_section_form" method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <input type="hidden" name="action" value="update_ready_section_info"/>
            <input type="hidden" name="section_id" value="{{ ready_section.id }}"/>

            <div class="form-group">
                <label><strong><em>Sous-titre :</em></strong></label>
                <input type="text" class="form-control" name="subtitle" value="{{ ready_section.subtitle|default:'Collection' }}">
            </div>

            <div class="form-group">
                <label><strong><em>Titre :</em></strong></label>
                <input type="text" class="form-control" name="title" value="{{ ready_section.title|default:'Haute Couture' }}">
            </div>

            <div class="form-group">
                <label><strong><em>Texte du lien :</em></strong></label>
                <input type="text" class="form-control" name="link_text" value="{{ ready_section.link_text|default:'Découvrir' }}">
            </div>

            <div class="form-group">
                <label><strong><em>URL du lien :</em></strong></label>
                <input type="url" class="form-control" name="link_url" value="{{ ready_section.link_url|default:'' }}">
            </div>

            <div class="form-group">
                <label><strong><em>Image de fond :</em></strong></label>
                <input type="file" name="background">
                <p id="image_selected_text_ready" style="font-size: 13px; color: #555; margin-top: 5px; display: none;">
                    Fichier sélectionné : <span id="selected_filename_ready"></span>
                </p>
            </div>

            <button type="submit" class="full-width-button">Valider</button>
            <button type="button" id="reset_ready_section_button" style="background: none; border: none; color: #c0392b; font-size: 13px; text-decoration: underline; margin: 10px auto 0; display: block; cursor: pointer;">
                Réinitialiser cette section
            </button>
        </form>
    </div>
</div>

<script>
    $('#update_ready_section_form').submit(function(e) {
        e.preventDefault();
        const form = $(this)[0];
        const formData = new FormData(form);

        $.ajax({
            type: 'POST',
            url: '{% url "brand_action_handler" %}',
            data: formData,
            contentType: false,
            processData: false,
            success: function(response) {
                if (response.status === 'success') {
                    location.reload();
                } else {
                    alert(response.message);
                }
            }
        });
    });

    const inputImageReady = document.querySelector('#update_ready_section_form input[name="background"]');
    const textContainerReady = document.getElementById('image_selected_text_ready');
    const filenameSpanReady = document.getElementById('selected_filename_ready');

    inputImageReady.addEventListener('change', function() {
        const file = this.files[0];
        if (file) {
            filenameSpanReady.textContent = file.name;
            textContainerReady.style.display = 'block';
        } else {
            filenameSpanReady.textContent = '';
            textContainerReady.style.display = 'none';
        }
    });

    $('#reset_ready_section_button').click(function() {
        if (!confirm("Êtes-vous sûr de vouloir réinitialiser cette section ?")) return;

        $.ajax({
            type: 'POST',
            url: '{% url "brand_action_handler" %}',
            data: {
                'action': 'reset_ready_section',
                'section_id': '{{ ready_section.id }}',
                'csrfmiddlewaretoken': '{{ csrf_token }}'
            },
            success: function(response) {
                if (response.status === 'success') {
                    location.reload();
                } else {
                    alert(response.message);
                }
            }
        });
    });
</script>


<div id="update_lookbook_section" class="panel_data" style="z-index: 10000; display: none;">
    <div class="panel panel_data-content">
        <form id="update_lookbook_section_form" method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <input type="hidden" name="action" value="update_lookbook_section_info"/>
            <input type="hidden" name="section_id" value="{{ lookbook_section.id }}"/>

            <div class="form-group">
                <label><strong><em>Sous-titre :</em></strong></label>
                <input type="text" class="form-control" name="subtitle" value="{{ lookbook_section.subtitle|default:'Collection 2025' }}">
            </div>

            <div class="form-group">
                <label><strong><em>Images à ajouter :</em></strong></label>
                <input type="file" id="lookbook_images_input" name="images" multiple>
                <div id="lookbook_preview_container" style="margin-top: 10px; display: flex; flex-wrap: wrap; gap: 10px;"></div>
            </div>

            <div class="form-group">
                <label><strong><em>Images déjà enregistrées :</em></strong></label>
                <div id="existing_lookbook_images" style="margin-top: 10px; display: flex; flex-wrap: wrap; gap: 10px;">
                    {% for img in lookbook_section.images.all %}
                        <div class="lookbook-img-box" data-id="{{ img.id }}">
                            <img src="{{ img.image.url }}" style="width: 100px; height: auto; border: 1px solid #ccc;">
                            <button type="button" class="delete-lookbook-image" data-id="{{ img.id }}" style="display: block; margin: 5px auto; font-size: 11px; color: #c0392b;">Supprimer</button>
                        </div>
                    {% empty %}
                        <p>Aucune image enregistrée.</p>
                    {% endfor %}
                </div>
            </div>

            <button type="submit" class="full-width-button">Valider</button>
            <button type="button" id="reset_lookbook_section_button" style="background: none; border: none; color: #c0392b; font-size: 13px; text-decoration: underline; margin: 10px auto 0; display: block; cursor: pointer;">
                Réinitialiser cette section
            </button>
        </form>
    </div>
</div>

<script>
    const input = document.getElementById('lookbook_images_input');
    const previewContainer = document.getElementById('lookbook_preview_container');
    let selectedFiles = [];

    input.addEventListener('change', function () {
        const newFiles = Array.from(this.files);
        selectedFiles = selectedFiles.concat(newFiles);

        previewContainer.innerHTML = '';
        selectedFiles.forEach((file, index) => {
            const reader = new FileReader();
            reader.onload = function (e) {
                const div = document.createElement('div');
                div.style.position = 'relative';
                div.style.width = '100px';

                const img = document.createElement('img');
                img.src = e.target.result;
                img.style.width = '100%';
                img.style.border = '1px solid #ccc';

                const removeBtn = document.createElement('button');
                removeBtn.innerText = '✖';
                removeBtn.type = 'button';
                removeBtn.style.position = 'absolute';
                removeBtn.style.top = '0';
                removeBtn.style.right = '0';
                removeBtn.style.background = '#c0392b';
                removeBtn.style.color = '#fff';
                removeBtn.style.border = 'none';
                removeBtn.style.cursor = 'pointer';
                removeBtn.onclick = () => {
                    selectedFiles.splice(index, 1);
                    updatePreview();
                };

                div.appendChild(img);
                div.appendChild(removeBtn);
                previewContainer.appendChild(div);
            };
            reader.readAsDataURL(file);
        });

        // Clear input to allow selecting same file again
        this.value = '';
    });

    function updatePreview() {
        previewContainer.innerHTML = '';
        selectedFiles.forEach((file, index) => {
            const reader = new FileReader();
            reader.onload = function (e) {
                const div = document.createElement('div');
                div.style.position = 'relative';
                div.style.width = '100px';

                const img = document.createElement('img');
                img.src = e.target.result;
                img.style.width = '100%';
                img.style.border = '1px solid #ccc';

                const removeBtn = document.createElement('button');
                removeBtn.innerText = '✖';
                removeBtn.type = 'button';
                removeBtn.style.position = 'absolute';
                removeBtn.style.top = '0';
                removeBtn.style.right = '0';
                removeBtn.style.background = '#c0392b';
                removeBtn.style.color = '#fff';
                removeBtn.style.border = 'none';
                removeBtn.style.cursor = 'pointer';
                removeBtn.onclick = () => {
                    selectedFiles.splice(index, 1);
                    updatePreview();
                };

                div.appendChild(img);
                div.appendChild(removeBtn);
                previewContainer.appendChild(div);
            };
            reader.readAsDataURL(file);
        });
    }

    $('#update_lookbook_section_form').submit(function(e) {
        e.preventDefault();
        const formData = new FormData(this);
        selectedFiles.forEach(file => formData.append('images', file));

        $.ajax({
            type: 'POST',
            url: '{% url "brand_action_handler" %}',
            data: formData,
            contentType: false,
            processData: false,
            success: function(response) {
                if (response.status === 'success') {
                    location.reload();
                } else {
                    alert(response.message);
                }
            }
        });
    });

    $(document).on('click', '.delete-lookbook-image', function () {
        const imageId = $(this).data('id');
        const token = '{{ csrf_token }}';

        if (!confirm("Supprimer cette image ?")) return;

        $.ajax({
            url: '{% url "brand_action_handler" %}',
            method: 'POST',
            data: {
                'action': 'delete_lookbook_image',
                'image_id': imageId,
                'csrfmiddlewaretoken': token
            },
            success: function (response) {
                if (response.status === 'success') {
                    $('.lookbook-img-box[data-id="' + imageId + '"]').remove();
                } else {
                    alert(response.message || 'Erreur');
                }
            }
        });
    });

    $('#reset_lookbook_section_button').click(function () {
        if (!confirm("Êtes-vous sûr de vouloir réinitialiser cette section ?")) return;

        $.ajax({
            type: 'POST',
            url: '{% url "brand_action_handler" %}',
            data: {
                'action': 'reset_lookbook_section',
                'section_id': '{{ lookbook_section.id }}',
                'csrfmiddlewaretoken': '{{ csrf_token }}'
            },
            success: function (response) {
                if (response.status === 'success') {
                    location.reload();
                } else {
                    alert(response.message);
                }
            }
        });
    });
</script>




<div id="update_heritage_intro" class="panel_data" style="z-index: 10000; display: none;">
    <div class="panel panel_data-content">
        <form id="update_heritage_intro_form" method="post">
            {% csrf_token %}
            <input type="hidden" name="action" value="update_heritage_intro_info">
            <input type="hidden" name="section_id" value="{{ heritage_intro.id }}">

            <div class="form-group">
                <label><strong><em>Titre :</em></strong></label>
                <textarea class="form-control" name="title" rows="2">{{ heritage_intro.title|default:"Charlène Morabito L'Artisanat Italien au Cœur, l'Allure Parisienne pour Signature" }}</textarea>
            </div>

            <div class="form-group">
                <label><strong><em>Description :</em></strong></label>
                <textarea class="form-control" name="description" rows="5">{{ heritage_intro.description|default:"Née de la vision de Charlène Morabito, la maison incarne la fusion de deux cultures : la richesse d'un savoir-faire artisanal hérité de Calabre et l'élégance intemporelle de la France, de la lumière de Cannes à l'effervescence de Paris. Chaque création est une célébration de cette dualité, conçue pour une femme libre, solaire et résolument moderne." }}</textarea>
            </div>

            <button type="submit" class="full-width-button">Valider</button>
            <button type="button" id="reset_heritage_intro_button" style="background: none; border: none; color: #c0392b; font-size: 13px; text-decoration: underline; margin: 10px auto 0; display: block; cursor: pointer;">
                Réinitialiser cette section
            </button>
        </form>
    </div>
</div>

<script>
    $('#update_heritage_intro_form').submit(function(e) {
        e.preventDefault();
        const form = $(this)[0];
        const formData = new FormData(form);

        $.ajax({
            type: 'POST',
            url: '{% url "brand_action_handler" %}',
            data: formData,
            contentType: false,
            processData: false,
            success: function(response) {
                if (response.status === 'success') {
                    location.reload();
                } else {
                    alert(response.message);
                }
            }
        });
    });

    $('#reset_heritage_intro_button').click(function() {
        if (!confirm("Êtes-vous sûr de vouloir réinitialiser cette section ?")) return;

        $.ajax({
            type: 'POST',
            url: '{% url "brand_action_handler" %}',
            data: {
                'action': 'reset_heritage_intro',
                'section_id': '{{ heritage_intro.id }}',
                'csrfmiddlewaretoken': '{{ csrf_token }}'
            },
            success: function(response) {
                if (response.status === 'success') {
                    location.reload();
                } else {
                    alert(response.message);
                }
            }
        });
    });
</script>



<div id="update_heritage_block_one" class="panel_data" style="z-index: 10000; display: none;">
    <div class="panel panel_data-content">
        <form id="update_heritage_block_one_form" method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <input type="hidden" name="action" value="update_heritage_block_one_info"/>
            <input type="hidden" name="section_id" value="{{ heritage_block_one.id }}"/>

            <div class="form-group">
                <label><strong><em>Titre :</em></strong></label>
                <textarea class="form-control" name="title" rows="2">{{ heritage_block_one.title|default:"Les Racines Calabraises" }}</textarea>
            </div>

            <div class="form-group">
                <label><strong><em>Description :</em></strong></label>
                <textarea class="form-control" name="description" rows="5">{{ heritage_block_one.description|default:"C'est en Calabre, terre de caractère et de traditions, que l'histoire de la maison prend racine. Cet héritage italien, transmis avec passion, insuffle à chaque pièce une âme unique. Le culte des belles matières, la précision du geste et le sens du détail sont les piliers d'un artisanat d'exception qui défie le temps." }}</textarea>
            </div>

            <div class="form-group">
                <label><strong><em>Image :</em></strong></label>
                <input type="file" id="heritage_block_one_image_input" name="image">
                <p id="heritage_block_one_filename" style="font-size: 13px; color: #555; margin-top: 5px; display: none;">
                    Fichier sélectionné : <span id="heritage_block_one_selected_name"></span>
                </p>
            </div>

            <button type="submit" class="full-width-button">Valider</button>
            <button type="button" id="reset_heritage_block_one_button" style="background: none; border: none; color: #c0392b; font-size: 13px; text-decoration: underline; margin: 10px auto 0; display: block; cursor: pointer;">
                Réinitialiser ce bloc
            </button>
        </form>
    </div>
</div>

<script>
    $('#update_heritage_block_one_form').submit(function(e) {
        e.preventDefault();
        const form = this;
        const formData = new FormData(form);

        $.ajax({
            type: 'POST',
            url: '{% url "brand_action_handler" %}',
            data: formData,
            contentType: false,
            processData: false,
            success: function(response) {
                if (response.status === 'success') {
                    location.reload();
                } else {
                    alert(response.message);
                }
            }
        });
    });

    const heritageInput = document.getElementById('heritage_block_one_image_input');
    const heritageText = document.getElementById('heritage_block_one_filename');
    const heritageName = document.getElementById('heritage_block_one_selected_name');

    heritageInput.addEventListener('change', function () {
        if (this.files.length > 0) {
            heritageName.textContent = this.files[0].name;
            heritageText.style.display = 'block';
        } else {
            heritageName.textContent = '';
            heritageText.style.display = 'none';
        }
    });

    $('#reset_heritage_block_one_button').click(function () {
        if (!confirm("Êtes-vous sûr de vouloir réinitialiser ce bloc ?")) return;

        $.ajax({
            type: 'POST',
            url: '{% url "brand_action_handler" %}',
            data: {
                'action': 'reset_heritage_block_one',
                'section_id': '{{ heritage_block_one.id }}',
                'csrfmiddlewaretoken': '{{ csrf_token }}'
            },
            success: function (response) {
                if (response.status === 'success') {
                    location.reload();
                } else {
                    alert(response.message);
                }
            }
        });
    });
</script>




<div id="update_heritage_block_two" class="panel_data" style="z-index: 10000; display: none;">
    <div class="panel panel_data-content">
        <form id="update_heritage_block_two_form" method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <input type="hidden" name="action" value="update_heritage_block_two_info"/>
            <input type="hidden" name="section_id" value="{{ heritage_block_two.id }}"/>

            <div class="form-group">
                <label><strong><em>Titre :</em></strong></label>
                <textarea class="form-control" name="title" rows="2">{{ heritage_block_two.title|default:"L'Élégance Cannoise" }}</textarea>
            </div>

            <div class="form-group">
                <label><strong><em>Description :</em></strong></label>
                <textarea class="form-control" name="description" rows="5">{{ heritage_block_two.description|default:"Baignée par la lumière de la Côte d'Azur, Charlène Morabito développe à Cannes son amour pour une silhouette à la fois chic et décontractée. Le glamour de la Croisette et l'art de vivre méditerranéen inspirent des collections fluides et solaires, qui subliment le corps en mouvement et célèbrent une féminité naturelle." }}</textarea>
            </div>

            <div class="form-group">
                <label><strong><em>Image :</em></strong></label>
                <input type="file" id="heritage_block_two_image_input" name="image">
                <p id="heritage_block_two_filename" style="font-size: 13px; color: #555; margin-top: 5px; display: none;">
                    Fichier sélectionné : <span id="heritage_block_two_selected_name"></span>
                </p>
            </div>

            <button type="submit" class="full-width-button">Valider</button>
            <button type="button" id="reset_heritage_block_two_button" style="background: none; border: none; color: #c0392b; font-size: 13px; text-decoration: underline; margin: 10px auto 0; display: block; cursor: pointer;">
                Réinitialiser ce bloc
            </button>
        </form>
    </div>
</div>


<script>
    $('#update_heritage_block_two_form').submit(function(e) {
        e.preventDefault();
        const form = this;
        const formData = new FormData(form);

        $.ajax({
            type: 'POST',
            url: '{% url "brand_action_handler" %}',
            data: formData,
            contentType: false,
            processData: false,
            success: function(response) {
                if (response.status === 'success') {
                    location.reload();
                } else {
                    alert(response.message);
                }
            }
        });
    });

    const heritageInputTwo = document.getElementById('heritage_block_two_image_input');
    const heritageTextTwo = document.getElementById('heritage_block_two_filename');
    const heritageNameTwo = document.getElementById('heritage_block_two_selected_name');

    heritageInputTwo.addEventListener('change', function () {
        if (this.files.length > 0) {
            heritageNameTwo.textContent = this.files[0].name;
            heritageTextTwo.style.display = 'block';
        } else {
            heritageNameTwo.textContent = '';
            heritageTextTwo.style.display = 'none';
        }
    });

    $('#reset_heritage_block_two_button').click(function () {
        if (!confirm("Êtes-vous sûr de vouloir réinitialiser ce bloc ?")) return;

        $.ajax({
            type: 'POST',
            url: '{% url "brand_action_handler" %}',
            data: {
                'action': 'reset_heritage_block_two',
                'section_id': '{{ heritage_block_two.id }}',
                'csrfmiddlewaretoken': '{{ csrf_token }}'
            },
            success: function (response) {
                if (response.status === 'success') {
                    location.reload();
                } else {
                    alert(response.message);
                }
            }
        });
    });
</script>




<div id="update_heritage_block_three" class="panel_data" style="z-index: 10000; display: none;">
    <div class="panel panel_data-content">
        <form id="update_heritage_block_three_form" method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <input type="hidden" name="action" value="update_heritage_block_three_info"/>
            <input type="hidden" name="section_id" value="{{ heritage_block_three.id }}"/>

            <div class="form-group">
                <label><strong><em>Titre :</em></strong></label>
                <textarea class="form-control" name="title" rows="2">{{ heritage_block_three.title|default:"La Consécration Parisienne" }}</textarea>
            </div>

            <div class="form-group">
                <label><strong><em>Description :</em></strong></label>
                <textarea class="form-control" name="description" rows="5">{{ heritage_block_three.description|default:"C'est à Paris, capitale incontestée de la mode, que la vision de la créatrice s'affirme pleinement. La silhouette Morabito y gagne en structure et en audace. L'énergie de la ville, son exigence et son avant-gardisme poussent à la réinvention constante, donnant naissance à des pièces fortes qui marient à la perfection force et douceur." }}</textarea>
            </div>

            <div class="form-group">
                <label><strong><em>Image :</em></strong></label>
                <input type="file" id="heritage_block_three_image_input" name="image">
                <p id="heritage_block_three_filename" style="font-size: 13px; color: #555; margin-top: 5px; display: none;">
                    Fichier sélectionné : <span id="heritage_block_three_selected_name"></span>
                </p>
            </div>

            <button type="submit" class="full-width-button">Valider</button>
            <button type="button" id="reset_heritage_block_three_button" style="background: none; border: none; color: #c0392b; font-size: 13px; text-decoration: underline; margin: 10px auto 0; display: block; cursor: pointer;">
                Réinitialiser ce bloc
            </button>
        </form>
    </div>
</div>

<script>
    $('#update_heritage_block_three_form').submit(function(e) {
        e.preventDefault();
        const form = this;
        const formData = new FormData(form);

        $.ajax({
            type: 'POST',
            url: '{% url "brand_action_handler" %}',
            data: formData,
            contentType: false,
            processData: false,
            success: function(response) {
                if (response.status === 'success') {
                    location.reload();
                } else {
                    alert(response.message);
                }
            }
        });
    });

    const heritageInputThree = document.getElementById('heritage_block_three_image_input');
    const heritageTextThree = document.getElementById('heritage_block_three_filename');
    const heritageNameThree = document.getElementById('heritage_block_three_selected_name');

    heritageInputThree.addEventListener('change', function () {
        if (this.files.length > 0) {
            heritageNameThree.textContent = this.files[0].name;
            heritageTextThree.style.display = 'block';
        } else {
            heritageNameThree.textContent = '';
            heritageTextThree.style.display = 'none';
        }
    });

    $('#reset_heritage_block_three_button').click(function () {
        if (!confirm("Êtes-vous sûr de vouloir réinitialiser ce bloc ?")) return;

        $.ajax({
            type: 'POST',
            url: '{% url "brand_action_handler" %}',
            data: {
                'action': 'reset_heritage_block_three',
                'section_id': '{{ heritage_block_three.id }}',
                'csrfmiddlewaretoken': '{{ csrf_token }}'
            },
            success: function (response) {
                if (response.status === 'success') {
                    location.reload();
                } else {
                    alert(response.message);
                }
            }
        });
    });
</script>
